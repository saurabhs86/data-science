---
title: 'DTSC 650: Data Analytics In R'
subtitle: 'CodeGrade Assignments Part 1: fastfood'
output: html_notebook
editor_options:
  chunk_output_type: inline
---

## Student Info

```         
Name: 
Term: 
Date:
```

------------------------------------------------------------------------

## General Instructions

------------------------------------------------------------------------

### Name of File

Name your assignment file **`fastfood.qmd`**. This is a quarto "markdown" file, which has the file extension '.qmd'.

------------------------------------------------------------------------

### Allowable packages

The only allowable packages are `tidyverse` and `openintro` (you will need to install it if you haven't already). You should not use any other packages as CodeGrade is not set up to accept them on this assignment.

-   If the allowable packages are not installed on your local computer, you'll need to do a one-time installation *from the Console Window in RStudio* for each package like this:\
    **`install.packages('<package name>')`**\
    *Do not attempt to install packages in code that you submit to CodeGrade.*

-   Note: installing the entire tidyverse with `install.packages('tidyverse')` from the Console Window will save you from having to install any of the tidyverse's individual packages in the future.

-   In your code, load the package's library like this: **`library(<library name>)`**

------------------------------------------------------------------------

### Data Set

The data set for this assignment is called **`fastfood`**. See the [fastfood documentation](https://www.openintro.org/data/index.php?data=fastfood) for more info.

------------------------------------------------------------------------

### Pipe Notation

You may use the `tidyverse` pipe **`%>%`** or the new base R pipe **`|>`**. See [here](https://www.tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/) for a comparison.

You are expected to use pipe notation in all of the CodeGrade assignments. Although there are alternate ways to filter, subset, and summarize data sets, using the pipe creates more readable code and is an important skill to develop.

------------------------------------------------------------------------

### Rounding requirement

-   Round all float/dbl values to two decimal places.

------------------------------------------------------------------------

### Dataframe vs. Tibble

Typically, in CodeGrade assignments, we expect output to be dataframes, not tibbles, unless otherwise noted.

------------------------------------------------------------------------

### Inline vs. Console

By default, RStudio uses Inline output (Notebook mode) on R Markdown documents. You can switch between Inline and Console output modes by clicking the gear button in the editor toolbar (to the left of the green "insert new code chunk") and choosing either "Chunk Output Inline" or "Chunk Output in Console". See [here](https://bookdown.org/yihui/rmarkdown/notebook.html#creating-a-notebook) for more information.

Console output can be useful for debugging since that's how your solutions will appear to CodeGrade. You can type code directly into the Console as well and run it from there. For example: after you run the Q0 example code inline (shown below), you can type `Q0<ENTER>` in the Console to see how the output appears to CodeGrade.

------------------------------------------------------------------------

### Preliminaries

```{r}
### It's always a good idea when working in RStudio to start with a clean environment. 
### Clear objects from the environment memory that may be leftover from previous 
###   versions of your code or other assignments by running the following line:
rm(list = ls())

### Load Libraries
library(tidyverse) 
library(openintro)

### There may be warning messages about some of the packages. You can ignore these. Feel free to search online for the explanations for these messages.
```

### Before attempting the questions below, familiarize yourself with the `fastfood` dataset. Run the following block.

```{r}
fastfood

# You may get a warning based on your version of R, which says:
## "[WARNING] Deprecated: --self-contained. use --embed-resources --standalone"
# You can ignore this.
```

### Q0: An Example (or two)

Suppose the question is:\
**Q0.1 List the top 3 items with the most calories from each restaurant. Output the answer as a dataframe and store it in Q0.**

The following code block provides the solution:

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q0.1 # 

Q0.1 <- fastfood %>%
  select(restaurant, calories) %>%
  group_by(restaurant) %>% 
  slice_max(calories, n=3) %>%
  as.data.frame()
Q0.1
```

Suppose another question is:\
**Q0.2 How many items from each restaurant contain more than 1,000 calories. Output the answer as a data frame and store it in Q0.2.**

The following code block provides the solution:

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q0.2 # 

Q0.2 <- fastfood %>%   
  select(restaurant, calories) %>%   
  filter(calories>1000) %>%    
  group_by(restaurant) %>%    
  summarise(item_count = n()) %>%    
  as.data.frame() 
Q0.2
```

We expect your solutions to look like the above code block, where you are using the pipe operator (not other approaches) and, in some cases, finding the solution in just one line of code.

------------------------------------------------------------------------

## Questions

------------------------------------------------------------------------

### Q1 How many NA values are there in the entire fastfood dataset?

-   This can be done without using the pipe.
-   Do not hard code your answer. (Do not write "code" that looks like this: `Q1 <- 17`)
-   Your solution should be a numeric value assigned to Q1 and look something like this:

```         
1 [value]
```

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q1 # 

### TYPE YOUR CODE BELOW ###


Q1 <- fastfood |>
    is.na() |> 
  sum()


### VIEW OUTPUT ###
Q1

```

### Q2 How many NA values are there for the calcium variable?

-   This can be done without using the pipe.
-   Do not hard code your answer. (Do not write "code" that looks like this: `Q1 <- 17`)
-   Your solution should be a numeric value assigned to Q2 and look something like this:

```         
1 [value]
```

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q2 # 

### TYPE YOUR CODE BELOW ###
Q2 <- sum(is.na(fastfood$calcium))
      

### VIEW OUTPUT ###
Q2

```

### Q3 For Burger King, how many *rows* are there that have NA values in the fiber variable?

-   Your solution should be a dataframe value assigned to Q3 and look something like this:

```         
<header row>
1 [value]
```

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q3 # 

### TYPE YOUR CODE BELOW ###
Q3 <- fastfood |>
      filter(restaurant=='Burger King')|>
      filter(is.na(fiber))|>
      count()|>
      as.data.frame()

### VIEW OUTPUT ###
Q3

```

### Q4 Create a dataframe with a single column that lists all of the restaurants with no duplicates sorted in alphabetical order.

-   Your solution should be a dataframe value assigned to Q4 and look something like this:

```         
   restaurant
1 [value]
2 [value]
...
8 [value]
```

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q4 # 

### TYPE YOUR CODE BELOW ###
Q4 <- fastfood |>
      distinct(restaurant)|>
      arrange(restaurant)|>
      as.data.frame()

### VIEW OUTPUT ###
Q4

```

### Q5 Create a two column dataframe that lists the total fat of items from McDonald's. Then, remove any duplicate rows, and sort the dataframe by total fat from largest to smallest.

-   Your solution should be a dataframe value assigned to Q5 and look something like this:

```         
    restaurant total_fat
1    Mcdonalds   [value]
2    Mcdonalds   [value]
...
36   Mcdonalds   [value]
```

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q5 # 

### TYPE YOUR CODE BELOW ###

Q5 <- fastfood |>
      filter(restaurant=='Mcdonalds')|>
      select(restaurant,item ,total_fat)|>
      distinct(restaurant,total_fat)|>
      arrange(desc(total_fat))|>
      as.data.frame()

### VIEW OUTPUT ###
Q5

```

### Q6 Looking only at Burger King and Chick-Fil-A, which item has the highest calories?

-   Your solution should be a dataframe assigned to Q6 and look something like this:

```         
   <variable>
1 [item name]
```

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q6 # 

### TYPE YOUR CODE BELOW ###

Q6 <- fastfood |>
      filter(restaurant=='Burger King'|restaurant=='Chick-Fil-A')|>
      select(item ,calories)|>
      #arrange(desc(calories))|>
      slice_max(calories,n=1)|>
  select(item) |>
      as.data.frame()



### VIEW OUTPUT ###
Q6

```

### Q7 What is the average sugar amount for all items from Subway?

-   Your solution should be a dataframe assigned to Q7 and look something like this:

```         
  <variable name>
1         [value]
```

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q7 # 

### TYPE YOUR CODE BELOW ###

Q7 <- fastfood |>
      filter(restaurant=='Subway')|>
      select(item ,restaurant ,sugar)|>
      group_by(restaurant) |>
      summarise(avg=round(mean(sugar,na.rm = TRUE),2))|>
      select(avg )|>
      as.data.frame()




### VIEW OUTPUT ###
Q7

```

### Q8 Focusing only on Taco Bell, what is the average calorie value of all items after removing any duplicate rows?

-   Your solution should be a dataframe assigned to Q8 and look something like this:

```         
  <variable name>
1         [value]
```

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q8 # 

### TYPE YOUR CODE BELOW ###

Q8 <- fastfood |>
      filter(restaurant=='Taco Bell')|>
      select(item ,restaurant ,calories)|>
      distinct(item ,restaurant ,calories)|>
      group_by(restaurant) |>
      summarise(avg=round(mean(calories,na.rm = TRUE),2))|>
      select(avg )|>
      as.data.frame()




### VIEW OUTPUT ###
Q8

```

### Q9 Create a variable equal to `total_fat` x `sugar` called `fatXsugar`. Produce a dataframe that has the restaurant, item, and fatXsugar for the top 3 items, from highest to lowest.

-   Your solution should be a dataframe assigned to Q9 and should look something like this:

```         
  restaurant   item fatXsugar
1     [name] [name]   [value]
2     [name] [name]   [value]
3     [name] [name]   [value]
```

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q9 # 

### TYPE YOUR CODE BELOW ###

Q9 <- fastfood |>
      select(item ,restaurant ,total_fat,sugar)|>
      mutate(fatXsugar=total_fat*sugar)|>
      select(restaurant,item  ,fatXsugar)|>
      #arrange(desc(fatXsugar))|>
      slice_max(fatXsugar,n=3)|>
      as.data.frame()

### VIEW OUTPUT ###
Q9

```

### Q10 How many restaurants are there where the average saturated fat of their items is over 10?

-   Your solution should be a dataframe assigned to Q10 and look something like this:

```         
<header row>
1 [value]
```

```{r}
### Do not edit the following line. It is used by CodeGrade.
# CG Q10 # 

### TYPE YOUR CODE BELOW ###

Q10 <-fastfood |>
      select(item ,restaurant ,sat_fat)|>
      group_by(restaurant) |>
      summarise(avgfat=round(mean(sat_fat,na.rm = TRUE),2))|>
      filter(avgfat > 10)|>
      count()|>
      #select(avgfat )|>
      as.data.frame()



### VIEW OUTPUT ###
Q10

```

------------------------------------------------------------------------

# Before submitting to Code Grade:

1)  Clear objects from your environment. Click the broom in the Environment pane in the top right. This will erase any variables (like Q1, Q2) that you've stored.

2)  Rerun all your code. You can click the "Run" option above in this script pane (top right of notebook), then select "Run all". You should have all the variables stored again in the environment pane, and you should see no red error messages in the console below.

------------------------------------------------------------------------

This material is for enrolled students' academic use only and protected under U.S. Copyright Laws. This content must not be shared outside the confines of this course, in line with Eastern University's academic integrity policies. Unauthorized reproduction, distribution, or transmission of this material, including but not limited to posting on third-party platforms like GitHub, is strictly prohibited and may lead to disciplinary action. You may not alter or remove any copyright or other notice from copies of any content taken from BrightSpace or Eastern University's website.

(c) Copyright Notice 2024, Eastern University - All Rights Reserved
